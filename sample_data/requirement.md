# "/restaurants/:id/sales"と"/restaurants/:id/reports"の画面再設計のためのダミーデータ要件

コードベースを分析した結果、以下のデータ構造が必要であることがわかりました。

---

## 必要なデータ構造

### 1. テーブルオーダー（注文）
- ID（orderId）
- 完了日時
- 顧客ID（customerId）

### 2. オーダーアイテム（注文詳細）
- 注文ID（orderId）
- 商品ID（productId）
- 数量

### 3. 決済データ
- 注文ID（orderId）
- 決済方法
- 金額
- 手数料
- カード情報

### 4. 顧客データ
- 顧客ID（customerId）
- 名前

### 5. 商品データ
- 商品ID（productId）
- メニュー
- カテゴリ
- サブカテゴリ
- 商品名
- 価格
- 原価（粗利計算用）
- 粗利

---

## データ間の関係

- 1つのテーブルオーダー（注文）は、複数のオーダーアイテム（商品明細）を持つ（1対多）
- 1つのテーブルオーダー（注文）は、1つの決済データと紐づく（1対1が基本）
- オーダーアイテムは商品IDで商品データと紐づく
- テーブルオーダーは顧客IDで顧客データと紐づく

---

## 備考・注意点

- 商品価格は通常、商品データ（マスタ）から参照する。特別な割引や価格変更がある場合のみオーダーアイテム側で個別に持つ。
- 決済データは原則1注文1決済だが、将来的な拡張や例外（分割決済等）も考慮し、1注文に複数決済も許容できる設計にしておくと安心。
- 日付範囲や金額の整合性、階層関係（メニュー・カテゴリ・サブカテゴリ）を意識してデータを作成する。
- キャンセル・返金などの特殊ケースもorderやpaymentで表現できるようにする。

---

## 画面ごとの必要データ

### 売上詳細画面
この画面には複数のタブがあります：

- **期間別売上**：日付ごとの売上データ
  - 総売上、純売上、手数料、粗利益、客単価
- **支払い方法別売上**：決済方法ごとの売上
- **商品別売上**
  - **メニュー別売上**：メニューごとの売上データ
    - メニュー名、売上金額、売上比率
  - **カテゴリー別売上**：カテゴリごとの売上データ
    - カテゴリ名、売上金額、売上比率
  - **商品別売上**：商品ごとの売上データ
    - 商品名、売上金額、売上比率

### 売上サマリー画面
- 日報・月報データ：
  - 売上セクション
  - 決済方法別の金額
  - 純売上

---

## データ生成の注意点

- **日付範囲**：3月1日から5月31日までの期間をカバー
- **営業時間**：ランチタイムは11:00~14:00、ディナータイムは17:00~24:00とする
- **データの一貫性**：
  - 商品購買データと決済データの金額が一致すること
  - メニュー、カテゴリ、商品の階層関係が正しいこと
  - 粗利計算のために原価データが必要
- **特殊なケース**：
  - キャンセルされた注文
  - 返金データ
  - 複数のメニューに関連付けられた同一商品

---

## 結論

提案されているデータ構造（商品購買データ、決済データ、顧客データ、商品データ）は基本的に画面表示に必要な要素をカバーしています。ただし、以下の点に注意が必要です：

- **粗利計算**：商品の原価データが必要
- **階層関係**：メニュー、カテゴリ、サブカテゴリ、商品の関連付け
- **決済方法**：オンライン決済、現地決済などの区別
- **キャンセル・返金**：これらの特殊ケースも含める

これらの要素を含めることで、画面表示に必要なデータを網羅できます。